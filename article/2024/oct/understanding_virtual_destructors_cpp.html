<div class="content">
    <h1>Understanding Virtual Destructors in C++</h1>

    <div>
        <h2>Introduction</h2>
        <p>In C++, a <strong>virtual destructor</strong> is essential when dealing with inheritance and polymorphism.
            Without a virtual destructor in the base class, derived class destructors may not be called correctly,
            leading to resource leaks or undefined behavior. To explain this concept, let's use the analogy of a
            building with multiple floors.</p>
    </div>

    <div>
        <h2>Building Analogy</h2>
        <p>Imagine a building where each floor is like a derived class in C++, and the <strong>base</strong> of the
            building is the base class. Here's the situation:</p>

        <ul>
            <li>The <strong>base class</strong> is like the foundation of the building, and each <strong>derived
                    class</strong> represents a higher floor.</li>
            <li>If a crane wants to destroy (destruct) the building, it needs to start from the top (floor 5) and work
                its way down to the base.</li>
            <li>If the crane starts from the base (foundation) first, the entire structure collapses in an uncontrolled
                way, which is dangerous and messy.</li>
        </ul>

        <p>This is exactly how virtual destructors work in C++. If you delete an object through a base class pointer and
            that base class doesn't have a virtual destructor, the derived class destructors (upper floors) won't be
            called correctly. Let's look at an example:</p>
    </div>

    <div>
        <h2>Example of Virtual Destructors in C++</h2>

        <p>Below is an example demonstrating the correct use of virtual destructors:</p>

        <pre><code class="cpp">
#include &lt;iostream&gt;

// Base class (Foundation of the building)
class Base {
public:
    // Virtual destructor to ensure proper destruction
    virtual ~Base() {
        std::cout &lt;&lt; "Base (foundation) destroyed!" &lt;&lt; std::endl;
    }
};

// Derived class Floor 1
class Floor1 : public Base {
public:
    ~Floor1() {
        std::cout &lt;&lt; "Floor 1 destroyed!" &lt;&lt; std::endl;
    }
};

// Derived class Floor 2
class Floor2 : public Floor1 {
public:
    ~Floor2() {
        std::cout &lt;&lt; "Floor 2 destroyed!" &lt;&lt; std::endl;
    }
};

int main() {
    // Create a building (with a Floor2 object) and destroy it through a Base pointer
    Base* building = new Floor2();
    
    // Delete building (Start destruction)
    delete building;

    return 0;
}
        </code></pre>

        <p><strong>Explanation:</strong></p>
        <ul>
            <li>We created a building using <strong>Floor2</strong>, which is the highest floor (derived class).</li>
            <li>We deleted the building through a <strong>Base</strong> pointer, starting the destruction process.</li>
            <li>Because the base class has a <strong>virtual destructor</strong>, destruction happens in the correct
                order:
                <ul>
                    <li><strong>Floor 2</strong> (derived class) gets destroyed first, representing the top floor.</li>
                    <li>Then <strong>Floor 1</strong> gets destroyed (middle floor).</li>
                    <li>Finally, the <strong>Base</strong> (foundation) gets destroyed last.</li>
                </ul>
            </li>
            <li>If the <strong>Base</strong> class didn't have a virtual destructor, the program would only destroy the
                base, and the floors (derived classes) would be left hanging, leading to resource leaks or inconsistent
                behavior.</li>
        </ul>
    </div>

    <div>
        <h2>Why Virtual Destructors Matter</h2>
        <p>In C++, when you delete an object through a base class pointer, it's essential to have a <strong>virtual
                destructor</strong> in the base class. This ensures that the derived class destructors are called
            correctly. Without this, only the base class destructor is called, leaving the derived part of the object
            improperly destroyed. This is akin to demolishing a building by destroying the foundation firstâ€”it causes
            chaos and leaves a mess.</p>
    </div>
</div>
